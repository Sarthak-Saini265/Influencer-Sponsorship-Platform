<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/static/site_logo.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200&family=Ubuntu&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="/static/styles/ad_request_page.css">
    <title>{{campaign.name}}</title>
</head>

<body>
    <div class="main_div">
        {% if 'logged_in' not in session %}
        <header id="head1" class="navbar_head">
            <nav id="nav1" class="navbar">
                <a href="/"><img src="/static/imageedit_9_7708440648.png" alt="logo" class="logo"></a>
                <ul class="nav_list">
                    <li id="explore_div">
                        Explore
                        <span class="material-symbols-outlined explore_arrow">keyboard_arrow_down</span>
                    </li>
                    <div class="explore_overlay" style="display: none;">
                        <ul class="explore_overlay_ul">
                            <li class="explore_sponsors_li" onclick="window.location.href='/all_sponsors'">
                                <a href="/all_sponsors" class="explore_sponsors_anchor">
                                    <span class="explore_sponsors_heading">Sponsors</span>
                                    <span class="explore_sponsors_desc">View all sponsors on Sparked</span>
                                </a>
                            </li>
                            <li class="explore_niche_li" onclick="window.location.href='/all_influencers'">
                                <a href="/all_influencers" class="explore_sponsors_anchor">
                                    <span class="explore_sponsors_heading">Niches</span>
                                    <span class="explore_sponsors_desc">Explore influencers with different niches</span>
                                </a>
                            </li>
                            <li class="explore_campaigns_li" onclick="window.location.href='/all_campaigns'">
                                <a href="/all_campaigns" class="explore_sponsors_anchor">
                                    <span class="explore_sponsors_heading">Campaigns</span>
                                    <span class="explore_sponsors_desc">Pick a campaign that fits your tastes</span>
                                </a>
                            </li>
                            <li class="explore_profile_maker_li" onclick="window.location.href='/signup_choose'">
                                <a href="/signup_choose" class="explore_sponsors_anchor">
                                    <span class="explore_sponsors_heading">Profile Maker</span>
                                    <span class="explore_sponsors_desc">Build your own custom profile</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <li><a href="/signup_choose" class="nav_list_anchors">Become a Sponsor</a></li>
                    <li><a href="/login_page" class="nav_list_anchors">Login</a></li>
                </ul>
            </nav>
        </header>
        {% else %}
        <header id="head1" class="navbar_head">
            <nav id="nav1" class="navbar">
                <a href="/"><img src="/static/imageedit_9_7708440648.png" alt="logo" class="logo"></a>
                <ul class="nav_list">
                    <li id="explore_div">
                        Explore
                        <span class="material-symbols-outlined explore_arrow">keyboard_arrow_down</span>
                    </li>
                    <div class="explore_overlay" style="display: none;">
                        <ul class="explore_overlay_ul">
                            <li class="explore_sponsors_li" onclick="window.location.href='/all_sponsors'">
                                <a href="/all_sponsors" class="explore_sponsors_anchor">
                                    <span class="explore_sponsors_heading">Sponsors</span>
                                    <span class="explore_sponsors_desc">View all sponsors on Sparked</span>
                                </a>
                            </li>
                            <li class="explore_niche_li" onclick="window.location.href='/all_influencers'">
                                <a href="/all_influencers" class="explore_sponsors_anchor">
                                    <span class="explore_sponsors_heading">Niches</span>
                                    <span class="explore_sponsors_desc">Explore influencers with different niches</span>
                                </a>
                            </li>
                            <li class="explore_campaigns_li" onclick="window.location.href='/all_campaigns'">
                                <a href="/all_campaigns" class="explore_sponsors_anchor">
                                    <span class="explore_sponsors_heading">Campaigns</span>
                                    <span class="explore_sponsors_desc">Pick a campaign that fits your tastes</span>
                                </a>
                            </li>
                            {% if login_type == 'Sponsor' %}
                            <li class="explore_profile_maker_li" onclick="window.location.href='/sponsor/{{username}}/personal/profile/edit'">
                                <a href="/sponsor/{{username}}/personal/profile/edit" class="explore_sponsors_anchor">
                                    <span class="explore_sponsors_heading">Profile Maker</span>
                                    <span class="explore_sponsors_desc">Build your own custom profile</span>
                                </a>
                            </li>
                            {% else %}
                            <li class="explore_profile_maker_li" onclick="window.location.href='/influencer/{{username}}/personal/profile/edit'">
                                <a href="/influencer/{{username}}/personal/profile/edit" class="explore_sponsors_anchor">
                                    <span class="explore_sponsors_heading">Profile Maker</span>
                                    <span class="explore_sponsors_desc">Build your own custom profile</span>
                                </a>
                            </li>
                            {% endif %}
                        </ul>
                    </div>
                    <li><a href="#" class="nav_list_anchors become_sponsor">Become a Sponsor</a></li>
                    <li class="profile_pic_li">
                        <div class="profile_pic_div_nav">
                            <img src="{{profile_pic}}" alt="profile_pic" class="profile_pic_nav">
                        </div>
                    </li>
                    <div class="profile_overlay" style="display: none;">
                        <ul class="profile_overlay_ul">
                            {% if login_type == "Influencer" %}
                            <li class="profile_overlay_li"
                                onclick="window.location.href='/influencer/{{username}}/personal/profile'">
                                <a href="/influencer/{{username}}/personal/profile" class="profile_overlay_anchor">
                                    <span class="profile_overlay_heading">Profile</span>
                                </a>
                            </li>
                            {% else %}
                            <li class="profile_overlay_li"
                                onclick="window.location.href='/sponsor/{{username}}/personal/profile'">
                                <a href="/sponsor/{{username}}/personal/profile" class="profile_overlay_anchor">
                                    <span class="profile_overlay_heading">Profile</span>
                                </a>
                            </li>
                            {% endif %}
                            <li class="profile_overlay_li" onclick="window.location.href='#'">
                                <a href="#" class="profile_overlay_anchor">
                                    <span class="profile_overlay_heading">Activity</span>
                                </a>
                            </li>
                            <li class="profile_overlay_li" onclick="window.location.href='/logout'">
                                <a href="/logout" class="profile_overlay_anchor">
                                    <span class="profile_overlay_heading">Logout</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </ul>
            </nav>
        </header>
        {% endif %}
        <div class="content">
            <div class="campaign_details">
                <h1 class="name fonts">{{campaign.name}} <span>({{ad.number_of_completions}} completions)</span></h1>
                <h2 class="task_heading fonts">Task -</h2>
                <h2 class="description fonts">{{ad.task}}</h2>
                <h2 class="requirements fonts">Requirements -</h2>
                <ol>
                    {% for requirement in all_requirements %}
                    <li class="requirements_li fonts">{{format_title(requirement)}}</li>
                    {% endfor %}
                </ol>
                <!-- <h3 class="to_from fonts">From - <span>{{remove_time(campaign.start_date)}}</span> to <span>{{remove_time(campaign.end_date)}}</span></h3> -->
                <h3 class="to_from fonts potential_payment">Potential Payment - <span>US${{ad.potential_payment}}</span>
                </h3>
                <h3 class="to_from fonts">Last date - <span>{{remove_time(campaign.end_date)}}</span></h3>
                <div class="company_logo_div">
                    <div class="imgContainer" onclick="window.location.href='/sponsor/{{ad_sponsor.username}}'">
                        <img src="{{get_logo(campaign.company)}}" alt="logo" class="company_logo">
                    </div>
                    <h3 class="company_name fonts">By - <a
                            href="/sponsor/{{ad_sponsor.username}}"><span>{{get_company_name(campaign.company)}}</span></a>
                    </h3>
                </div>
                {% if login_type == "Sponsor" and user_id == ad_sponsor.data_id %}
                <div class="edit_operations">
                    <div class="edit_campaign" onclick="window.location.href='/sponsor/{{username}}/ad_request_edit_page/{{ad_id}}'">
                        <span class="material-symbols-outlined edit_icon">edit</span>
                        <a href="/sponsor/{{username}}/ad_request_edit_page/{{ad_id}}">Edit</a>
                    </div>
                    <div class="delete_campaign"
                        onclick="window.location.href='/sponsor/{{username}}/ad_request/delete/{{ad_id}}'">
                        <span class="material-symbols-outlined delete_icon">delete</span>
                        <a href="/sponsor/{{username}}/ad_request/delete/{{ad_id}}">Delete</a>
                    </div>
                </div>
                {% endif %}
                {% if login_type == "Influencer" %}
                {% if contract_exist != None %}
                {% if contract_exist.status == "Accepted" %}
                <div class="completed_info">
                    <h3 class="info_text">You have accepted this Ad Request. Check you Profile page for further details.</h3>
                    <span class="info_date">Contract ID - {{contract_index}}.</span>
                </div>
                {% endif %}
                {% if contract_exist.status == "Completed" %}
                <div class="completed_info">
                    <h3 class="info_text">You have completed this Ad Request on</h3>
                    <span class="info_date">{{remove_time(contract_exist.date_completed)}}.</span>
                    <div class="completed_id">
                        <h3 class="info_id">Contract ID - {{contract_index}}.</h3>
                    </div>
                </div>
                {% endif %}
                {% if contract_exist.status == "Rejected" %}
                <div class="completed_info">
                    <h3 class="info_text">You have rejected this Ad Request. You can no longer accept it.</h3>
                    <span class="info_date">Contract ID - {{contract_index}}.</span>
                </div>
                {% endif %}
                {% elif negot_true != None %}
                <div class="completed_info">
                    <h3 class="info_text">Negotiations underway. Please Check your Profile for more details</h3>
                    <span class="info_date">Negotiation ID - {{negot_index}}.</span>
                </div>
                {% else %}

                <div class="accept_reject">
                    <div class="negotiate_button_divs">
                        <button class="request negotiate_buttons" onclick="submit_accept_form()">Request</button>
                    </div>
                    <form action="/ad/{{ad_id}}/accept/{{user.inf_id}}" method="POST" hidden class="accept_form"></form>
                    <div class="negotiate_button_divs negotiate_div" onclick="open_negot_window()">
                        <button class="negotiate negotiate_buttons">Negotiate</button>
                    </div>
                    <div class="negotiate_button_divs">
                        <button class="reject negotiate_buttons" onclick="submit_reject_form()">Reject</button>
                        <form action="/influencer/{{username}}/contract/{{ad_id}}/reject" hidden class="reject_form"></form>
                    </div>
                    <div class="negot_window">
                        <div class="form_div">
                            <form action="/ad/{{ad_id}}/neg/{{user.inf_id}}" method="POST" class="negotiate_form">
                                <div class="form_field">
                                    <label for="negotiate_price" class="form_label">Counter offer</label>
                                    <input type="number" name="negotiate_price" id="negotiate_price" class="form_input"
                                        placeholder="Your offer" required>
                                </div>
                                <div class="form_field msg_field">
                                    <label for="message">Message</label>
                                    <textarea name="message" id="message" cols="30" rows="10" maxlength="255"
                                        placeholder="Type a message for the sponsor"></textarea>
                                </div>
                                <div class="submit_button" onclick="submit_negotiate_form()">
                                    <input type="submit" value="Send" class="submit">
                                    <span class="material-symbols-outlined send_icon">send</span>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endif %}
            </div>
            {% if login_type == "Sponsor" and user_id == ad_sponsor.data_id %}
            <div class="recommended_influencers">
                <div class="recom_heading_div">
                    <h3 class="recom_heading">Recommended Influencers</h3>
                </div>
                <div class="influencers_all_divs">
                    {% for influencer in recommended %}
                    <div class="influencer_div"
                        onclick="window.location.href='/influencer/{{get_username(influencer.inf_id)}}'">
                        <div class="infl_image" username="{{get_username(influencer.inf_id)}}">
                            <img src="{{influencer.profile_pic}}" alt="img" class="influencer_image">
                        </div>
                        <h2 class="influencer_name">{{influencer.name}}</h2>
                        <div class="infl_rating">
                            <span class="material-symbols-outlined symbol_margin">star</span>
                            <h5 class="influencer_rating">{{influencer.rating}}</h5>
                            <h5 class="infleuncer_contracts_compl">({{influencer.contracts_completed}})</h5>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    {% if trigger_js2 %}
    <script>
        alert('Your request has been sent to the sponsor. Please wait for a response. All responses are shown on your profile page.')
    </script>
    {% endif %}
    {% if trigger_js %}
    <script>
        alert('Your offer has been sent. Please check your Profile for follow-ups.')
    </script>
    {% endif %}
    <script src="/static/scripts/ad_request_page.js"></script>
</body>

</html>